@page "/"
@using PESOapps.Shared.Services
@inject IFormFactor FormFactor
@inject IJSRuntime JS

<PageTitle>Home</PageTitle>

<div class="home-container">
    <div class="peso-menu">
        <div class="org-logo-cont texts">
            <div class="org-cont">
                <div class="org-logo">
                    <span class="peso-log">Public Employment Service Office</span>
                </div>
                <div class="org-logo-text">
                    <span class="misor-log wrap">Kung Modangop ka sa PESO, Sigurado ang Disenteng Trabaho.</span>
                </div>
            </div>

            <div class="container1">
                <!-- PESO Managers Section -->
                <div class="card1">
                    <h2>PESO Managers</h2>
                    <p>Sign in your PESO manager account.</p>
                    <NavLink class="btn1" href="Login">Sign In</NavLink>
                </div>

                <!-- Jobseeker Section -->
                <div class="card1">
                    <h2>Jobseeker</h2>
                    <p>Register to our National Skills Registration Program (NSRP) for job seekers.</p>
                    <a class="btn1" href="https://pesomisor.com/reg/nsrp" target="_blank">Register Now</a>
                    <NavLink class="btn1" href="Login">Sign In</NavLink>
                </div>

                <!-- Employer Section -->
                <div class="card1">
                    <h2>Employer</h2>
                    <p>We have @verifiedCountText applicants looking for a job.</p>
                    <a class="btn1" href="https://pesomisor.com/reg/employer" target="_blank">Register Now</a>
                    <NavLink class="btn1" href="Login">Sign In</NavLink>
                </div>
            </div>

        </div>

        <div class="org-logo-cont gov">
            <div class="peso-logos peso-logo-im">
                <img src="" />
            </div>
            <div class="peso-logos">
                <img class="govpic" src="" />
            </div>
        </div>
    </div>
    <div class="aboutus-bub">
        <div class="header-title">
            <span class="misvis-title">About Us</span>
        </div>
        <div class="cont-ab">
            <div>The implementing rules and regulations of Republic Act No. 8759 was issued – otherwise known as the Public Employment Service Office (PESO) Act of 1999, “An Act Institutionalizing a National Facilitation Service Network through Establishment of a Public Employment Service Office (PESO) in every Province, Key Cities and other Strategic Areas”, as amended by Republic Act No. 10691.</div>
            <div>To carry out the above declared policy, PESO shall be operated and maintained by the Local Government Unit (LGU), which shall be linked to the Department of Labor and Employment (DOLE) Regional Office for coordination and technical supervision.</div>
            <div>On October 7, 2019, the Public Employment Service Office (PESO) was created as a regular department of the Provincial Government of Misamis Oriental (PGMO), with regular Plantilla Positions and corresponding Budgetary Allocation, pursuant to Ordinance Number 1440-2019.</div>
        </div>
    </div>
     <div class="org-container pesomisvis ">
         <div class="org-contents">
            <div class="header-title">
                <span class="misvis-title">Mission and Vision</span>
            </div>
             <div class="org-content misvis">
                <div class="misvis-divider">     
                     <span class="misvis-header">
                       OFFICE MANDATE 
                     </span> 
                     <span class="misvis-par">
                      PESO shall provide decent and gainful employment opportunities for all, as well as, strengthen and expand the existing employment facilitation service machinery of the Provincial Government. 
                     </span>
                 </div> 
                 <div class="misvis-divider"> 
                     <span class="misvis-header">MISSION</span> 
                     <span class="misvis-par">
                         Every Misamisnon attains decent and productive employment. 
                     </span> 
                 </div> 
                 <div class="misvis-divider"> 
                    <span class="misvis-header">VISION</span> 
                     <span class="misvis-par"> 
                         To provide full-cycle employment facilitation services for increased employability and to collectively achieve the end-goal of PESO for massive job facilitation and substantial poverty alleviation towards inclusive growth.
                    </span> 
               </div> 
             </div>
            <div class="header-title">
                <span class="misvis-title">PESO Services</span>
            </div>
            <div class="container-services">
                <div class="content-services">
                    <div class="services">
                        <span>
                            1. It shall provide clients with adequate information and Labor Market Information (LMI);
                        </span>
                        <span>
                            2. It shall provide referral and placement services;
                        </span>
                        <span>
                            3. It shall initiate and organize job fairs and facilitate the conduct of local/special recruitment activities.
                        </span>
                    </div>
                </div>
            </div>
            <div class="header-title">
                <span class="misvis-title">Awards Received</span>
            </div>
            <div class="container">
                @foreach (var image in ImagePaths)
                {
                    <div class="card" style="cursor: pointer;" @onclick="() => ShowImage(image)">
                        <img src="@image" />
                    </div>
                }
            </div>
         </div> 
     </div>

    <div class="org-container aboutus">
        <div class="cont-aboutus">
            <div class="header-title">
                <span class="misvis-title">Contact Information</span>
            </div>
            <div class="contact-us-cont">
                <div class="contact-us-map">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d986.5371091539399!2d124.64808590311712!3d8.484944579054675!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x32fff2d90a528e4b%3A0xe0e875d18e2957ac!2sMisamis%20Oriental%20Provincial%20Capitol!5e0!3m2!1sen!2sph!4v1739758980473!5m2!1sen!2sph" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                </div>
                <div class="contact-us">
                    <div class="emails">
                        <div>
                            Email: 
                        </div>
                        <div>
                            peso@misamisoriental.gov.ph
                        </div>
                    </div>
                    <div class="emails">
                        <div>
                            PESO Facebook Page:
                        </div>
                        <div>
                            https://www.facebook.com/PESOMisOrProvincialOffice
                        </div>
                    </div>
                    <div class="emails">
                        <div>
                            Address:
                        </div>
                        <div>
                            2nd Floor, Provincial Capitol Building, Velez Street, Brgy. 27, CDOC
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center">
                <img src="@SelectedImage" class="img-fluid" />
            </div>
        </div>
    </div>
</div>
@inject HttpClient Http

@code {
    private string SelectedImage { get; set; }

    private List<string> ImagePaths = new()
    {
        "_content/PESOapps.Shared/images/award-1.png",
        "_content/PESOapps.Shared/images/award-2.png",
        "_content/PESOapps.Shared/images/award-3.png",
        "_content/PESOapps.Shared/images/award-4.png",
        "_content/PESOapps.Shared/images/award-5.png",
        "_content/PESOapps.Shared/images/award-6.png",
        "_content/PESOapps.Shared/images/award-7.png"
    };

    private void ShowImage(string imagePath)
    {
        SelectedImage = imagePath;
        JS.InvokeVoidAsync("showModal", "imageModal"); // Call JS function to open modal
    }

    private string verifiedCountText = "Loading...";

    protected override async Task OnInitializedAsync()
    {
        try
        {
            int count = await Http.GetFromJsonAsync<int>("http://localhost:5167/api/Applicant/GetNumberOfVerifiedApplicant");
            verifiedCountText = count.ToString();
        }
        catch (Exception ex)
        {
            verifiedCountText = "Error loading count";
            Console.WriteLine($"API error: {ex.Message}");
        }
    }
}